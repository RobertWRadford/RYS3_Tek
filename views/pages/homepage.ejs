<!DOCTYPE html>
<html lang="en">
<%- include('../../public/layouts/head') %>
<%- include('../../public/layouts/header.ejs') %>

<body>
    <%- include('../../public/layouts/aside.ejs') %>

    <article>
        <% gamesList.forEach((game) => { %>
        <%- include('../pages/games/homepage_game_partial.ejs', {game: game}) %>
        <% }) %>
    </article>

    <% if(pages.previous != null) { %>
        <form action='/homePagination' method='post'>
            <input type='hidden' name='page' value='<%= pages.previous %>' />
            <button class="bottom" type='submit'><%= pages.previous %></button>
        </form>
    <%  } %>

    <p><%= pages.current %></p>
    
    <% if(pages.next != null) { %>
        <form action='/homePagination' method='post'>
            <input type='hidden' name='page' value='<%= pages.next %>' />
            <button class="bottom" type='submit'><%= pages.next %></button>
        </form>
    <%  } %>

    <%- include('../../public/layouts/footer') %>
</body>
<script>
    let options = document.getElementsByTagName('option');
    let platformList = '<%= platforms %>'.split(',');
    if(platformList) {
        platformList.forEach(platform => {
            for(let i = 0; i < options.length; i++){
                if (options[i].value == platform){
                    options[i].selected = true;
                }
            }
        })
    }
    let genreList = '<%= genres %>'.split(',');
    if(genreList) {
        genreList.forEach(genre => {
            for(let i = 0; i < options.length; i++){
                if (options[i].value == genre){
                    options[i].selected = true;
                }
            }
        })
    }
</script>

</html>